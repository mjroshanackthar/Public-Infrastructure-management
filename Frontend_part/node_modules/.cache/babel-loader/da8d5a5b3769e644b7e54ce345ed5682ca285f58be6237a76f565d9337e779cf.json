{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\locha\\\\Downloads\\\\BC_Backend_part\\\\Frontend_part\\\\src\\\\contexts\\\\Web3Context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { ethers } from 'ethers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Web3Context = /*#__PURE__*/createContext();\nexport const useWeb3 = () => {\n  _s();\n  return useContext(Web3Context);\n};\n_s(useWeb3, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const Web3Provider = ({\n  children\n}) => {\n  _s2();\n  const [account, setAccount] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [chainId, setChainId] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [balance, setBalance] = useState('0');\n  const connectWallet = async () => {\n    try {\n      if (!window.ethereum) {\n        alert('Please install MetaMask!');\n        return;\n      }\n\n      // Request account access\n      const accounts = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const signer = await provider.getSigner();\n      const network = await provider.getNetwork();\n      const balance = await provider.getBalance(accounts[0]);\n      setAccount(accounts[0]);\n      setProvider(provider);\n      setSigner(signer);\n      setChainId(network.chainId.toString());\n      setBalance(ethers.formatEther(balance));\n      setIsConnected(true);\n      console.log('âœ… Wallet Connected');\n      console.log('Address:', accounts[0]);\n      console.log('Chain ID:', network.chainId.toString());\n      console.log('Balance:', ethers.formatEther(balance), 'ETH');\n\n      // Check if on Hardhat network\n      if (network.chainId.toString() !== '31337') {\n        alert('âš ï¸ Please switch to Hardhat Local network (Chain ID: 31337)');\n      }\n    } catch (error) {\n      console.error('Failed to connect wallet:', error);\n      alert('Failed to connect wallet: ' + error.message);\n    }\n  };\n  const disconnectWallet = () => {\n    setAccount(null);\n    setProvider(null);\n    setSigner(null);\n    setChainId(null);\n    setBalance('0');\n    setIsConnected(false);\n    console.log('ðŸ”Œ Wallet Disconnected');\n  };\n  const switchToHardhat = async () => {\n    try {\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x7A69'\n        }] // 31337 in hex\n      });\n    } catch (error) {\n      // If network doesn't exist, add it\n      if (error.code === 4902) {\n        await addHardhatNetwork();\n      } else {\n        console.error('Failed to switch network:', error);\n      }\n    }\n  };\n  const addHardhatNetwork = async () => {\n    try {\n      await window.ethereum.request({\n        method: 'wallet_addEthereumChain',\n        params: [{\n          chainId: '0x7A69',\n          // 31337 in hex\n          chainName: 'Hardhat Local',\n          nativeCurrency: {\n            name: 'Ethereum',\n            symbol: 'ETH',\n            decimals: 18\n          },\n          rpcUrls: ['http://127.0.0.1:8545']\n        }]\n      });\n    } catch (error) {\n      console.error('Failed to add network:', error);\n      alert('Failed to add Hardhat network: ' + error.message);\n    }\n  };\n  const updateBalance = async () => {\n    if (provider && account) {\n      const balance = await provider.getBalance(account);\n      setBalance(ethers.formatEther(balance));\n    }\n  };\n\n  // Listen for account changes\n  useEffect(() => {\n    if (window.ethereum) {\n      window.ethereum.on('accountsChanged', accounts => {\n        if (accounts.length > 0) {\n          setAccount(accounts[0]);\n          updateBalance();\n        } else {\n          disconnectWallet();\n        }\n      });\n      window.ethereum.on('chainChanged', () => {\n        window.location.reload();\n      });\n    }\n    return () => {\n      if (window.ethereum) {\n        window.ethereum.removeAllListeners('accountsChanged');\n        window.ethereum.removeAllListeners('chainChanged');\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Web3Context.Provider, {\n    value: {\n      account,\n      provider,\n      signer,\n      chainId,\n      balance,\n      isConnected,\n      connectWallet,\n      disconnectWallet,\n      switchToHardhat,\n      addHardhatNetwork,\n      updateBalance\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n};\n_s2(Web3Provider, \"mYjrQTjDfdgthCpG7yi4tcK3Asc=\");\n_c = Web3Provider;\nvar _c;\n$RefreshReg$(_c, \"Web3Provider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","ethers","jsxDEV","_jsxDEV","Web3Context","useWeb3","_s","Web3Provider","children","_s2","account","setAccount","provider","setProvider","signer","setSigner","chainId","setChainId","isConnected","setIsConnected","balance","setBalance","connectWallet","window","ethereum","alert","accounts","request","method","BrowserProvider","getSigner","network","getNetwork","getBalance","toString","formatEther","console","log","error","message","disconnectWallet","switchToHardhat","params","code","addHardhatNetwork","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","updateBalance","on","length","location","reload","removeAllListeners","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/locha/Downloads/BC_Backend_part/Frontend_part/src/contexts/Web3Context.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport { ethers } from 'ethers';\r\n\r\nconst Web3Context = createContext();\r\n\r\nexport const useWeb3 = () => useContext(Web3Context);\r\n\r\nexport const Web3Provider = ({ children }) => {\r\n  const [account, setAccount] = useState(null);\r\n  const [provider, setProvider] = useState(null);\r\n  const [signer, setSigner] = useState(null);\r\n  const [chainId, setChainId] = useState(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [balance, setBalance] = useState('0');\r\n\r\n  const connectWallet = async () => {\r\n    try {\r\n      if (!window.ethereum) {\r\n        alert('Please install MetaMask!');\r\n        return;\r\n      }\r\n\r\n      // Request account access\r\n      const accounts = await window.ethereum.request({ \r\n        method: 'eth_requestAccounts' \r\n      });\r\n      \r\n      const provider = new ethers.BrowserProvider(window.ethereum);\r\n      const signer = await provider.getSigner();\r\n      const network = await provider.getNetwork();\r\n      const balance = await provider.getBalance(accounts[0]);\r\n\r\n      setAccount(accounts[0]);\r\n      setProvider(provider);\r\n      setSigner(signer);\r\n      setChainId(network.chainId.toString());\r\n      setBalance(ethers.formatEther(balance));\r\n      setIsConnected(true);\r\n\r\n      console.log('âœ… Wallet Connected');\r\n      console.log('Address:', accounts[0]);\r\n      console.log('Chain ID:', network.chainId.toString());\r\n      console.log('Balance:', ethers.formatEther(balance), 'ETH');\r\n\r\n      // Check if on Hardhat network\r\n      if (network.chainId.toString() !== '31337') {\r\n        alert('âš ï¸ Please switch to Hardhat Local network (Chain ID: 31337)');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to connect wallet:', error);\r\n      alert('Failed to connect wallet: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const disconnectWallet = () => {\r\n    setAccount(null);\r\n    setProvider(null);\r\n    setSigner(null);\r\n    setChainId(null);\r\n    setBalance('0');\r\n    setIsConnected(false);\r\n    console.log('ðŸ”Œ Wallet Disconnected');\r\n  };\r\n\r\n  const switchToHardhat = async () => {\r\n    try {\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{ chainId: '0x7A69' }], // 31337 in hex\r\n      });\r\n    } catch (error) {\r\n      // If network doesn't exist, add it\r\n      if (error.code === 4902) {\r\n        await addHardhatNetwork();\r\n      } else {\r\n        console.error('Failed to switch network:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const addHardhatNetwork = async () => {\r\n    try {\r\n      await window.ethereum.request({\r\n        method: 'wallet_addEthereumChain',\r\n        params: [{\r\n          chainId: '0x7A69', // 31337 in hex\r\n          chainName: 'Hardhat Local',\r\n          nativeCurrency: {\r\n            name: 'Ethereum',\r\n            symbol: 'ETH',\r\n            decimals: 18\r\n          },\r\n          rpcUrls: ['http://127.0.0.1:8545'],\r\n        }]\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to add network:', error);\r\n      alert('Failed to add Hardhat network: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const updateBalance = async () => {\r\n    if (provider && account) {\r\n      const balance = await provider.getBalance(account);\r\n      setBalance(ethers.formatEther(balance));\r\n    }\r\n  };\r\n\r\n  // Listen for account changes\r\n  useEffect(() => {\r\n    if (window.ethereum) {\r\n      window.ethereum.on('accountsChanged', (accounts) => {\r\n        if (accounts.length > 0) {\r\n          setAccount(accounts[0]);\r\n          updateBalance();\r\n        } else {\r\n          disconnectWallet();\r\n        }\r\n      });\r\n\r\n      window.ethereum.on('chainChanged', () => {\r\n        window.location.reload();\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (window.ethereum) {\r\n        window.ethereum.removeAllListeners('accountsChanged');\r\n        window.ethereum.removeAllListeners('chainChanged');\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Web3Context.Provider value={{\r\n      account,\r\n      provider,\r\n      signer,\r\n      chainId,\r\n      balance,\r\n      isConnected,\r\n      connectWallet,\r\n      disconnectWallet,\r\n      switchToHardhat,\r\n      addHardhatNetwork,\r\n      updateBalance\r\n    }}>\r\n      {children}\r\n    </Web3Context.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}